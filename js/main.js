
const foodItem = [
    {
        id: 1,
        name: 'Ambur Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 13,
        img: 'images/biryani/Ambur-Chicken-Biryani.jpg',
        quantity: 1
    },
    {
        id: 2,
        name: 'Hyderabadi Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 15,
        img: 'images/biryani/Chicken-Biryani-hyd.jpg',
        quantity: 1
    },
    {
        id: 3,
        name: 'Egg Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 18,
        img: 'images/biryani/egg-biryani.jpeg',
        quantity: 1
    },
    {
        id: 4,
        name: 'Goan Fish Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 15,
        img: 'images/biryani/goan-fish-biryani.jpg',
        quantity: 1
    },
    {
        id: 5,
        name: 'Mutton Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 10,
        img: 'images/biryani/hyd-Mutton-Biryani.jpg',
        quantity: 1
    },
    {
        id: 6,
        name: 'Kamrupi Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 12,
        img: 'images/biryani/kamrupi-biryani.jpg',
        quantity: 1
    },
    {
        id: 7,
        name: 'Kashmiri Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 13,
        img: 'images/biryani/kashmiri.pulao.jpg',
        quantity: 1
    },
    {
        id: 8,
        name: 'Memoni Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 20,
        img: 'images/biryani/memonibiryani.png',
        quantity: 1
    },
    {
        id: 9,
        name: 'Mughlai Biryani',
        category: 'biryani',
        rating: 4.3,
        price: 15,
        img: 'images/biryani/mughlai-biryani.jpg',
        quantity: 1
    },
    {
        id: 10,
        name: 'Chicken Roast',
        category: 'chicken',
        rating: 4.3,
        price: 11,
        img: 'images/chicken/Chicken_roast.jpg',
        quantity: 1
    },
    {
        id: 11,
        name: 'Chicken Curry',
        category: 'chicken',
        rating: 4.3,
        price: 10,
        img: 'images/chicken/Chicken-Curry.jpg',
        quantity: 1
    },
    {
        id: 12,
        name: 'Chicken Do Pyaza',
        category: 'chicken',
        rating: 4.3,
        price: 14,
        img: 'images/chicken/Chicken-do-Pyaza.jpg',
        quantity: 1
    },
    {
        id: 13,
        name: 'Chicken Masala',
        category: 'chicken',
        rating: 4.3,
        price: 12,
        img: 'images/chicken/Chicken-Masala.jpeg',
        quantity: 1
    },
    {
        id: 14,
        name: 'Handi Chicken',
        category: 'chicken',
        rating: 4.3,
        price: 17,
        img: 'images/chicken/Handi-chicken.jpg',
        quantity: 1
    },
    {
        id: 15,
        name: 'Murgh Musallam',
        category: 'chicken',
        rating: 4.3,
        price: 20,
        img: 'images/chicken/Murgh-Musallam.jpg',
        quantity: 1
    },
    {
        id: 16,
        name: 'Matar Paneer',
        category: 'paneer',
        rating: 4.3,
        price: 15,
        img: 'images/paneer/Matar-Paneer.jpg',
        quantity: 1

    },
    {
        id: 17,
        name: 'Palak Paneer',
        category: 'paneer',
        rating: 4.3,
        price: 10,
        img: 'images/paneer/palak-paneer.jpg',
        quantity: 1
    },
    {
        id: 18,
        name: 'Paneer Butter Masala',
        category: 'paneer',
        rating: 4.3,
        price: 15,
        img: 'images/paneer/paneer-butter-masala.jpg',
        quantity: 1

    },
    {
        id: 19,
        name: 'Paneer Do Pyaza',
        category: 'paneer',
        rating: 4.3,
        price: 12,
        img: 'images/paneer/Paneer-Do-Pyaza.jpg',
        quantity: 1

    },
    {
        id: 20,
        name: 'Hyderabadi Paneer',
        category: 'paneer',
        rating: 4.3,
        price: 8,
        img: 'images/paneer/Paneer-Hyderabadi.jpg',
        quantity: 1
    },
    {
        id: 21,
        name: 'Paneer Lababdar',
        category: 'paneer',
        rating: 4.3,
        price: 7,
        img: 'images/paneer/paneer-lababdar.jpg',
        quantity: 1
    },
    {
        id: 22,
        name: 'Shahi Paneer',
        age: '32',
        category: 'paneer',
        rating: 4.3,
        price: 5,
        img: 'images/paneer/shahi-paneer.jpg',
        quantity: 1
    },
    {
        id: 23,
        name: 'Navratan Korma',
        category: 'vegetable',
        rating: 4.3,
        price: 8,
        img: 'images/vegetable/navratan-korma_-vegetable.png',
        quantity: 1
    },
    {
        id: 24,
        name: 'Veg Jalfrezi',
        category: 'vegetable',
        rating: 4.3,
        price: 7,
        img: 'images/vegetable/VEG-JALFREZI.jpg',
        quantity: 1
    },
    {
        id: 25,
        name: 'Veg Biryani',
        category: 'vegetable',
        rating: 4.3,
        price: 5,
        img: 'images/vegetable/vegetable-biryani.jpg',
        quantity: 1
    },
    {
        id: 26,
        name: 'Veg Curry',
        category: 'vegetable',
        rating: 4.3,
        price: 7,
        img: 'images/vegetable/vegetable-curry.jpeg',
        quantity: 1
    },
    {
        id: 27,
        name: 'Veg Kolhapur',
        category: 'vegetable',
        rating: 4.3,
        price: 10,
        img: 'images/vegetable/vegetable-kolhapuri.jpg',
        quantity: 1
    },
    {
        id: 28,
        name: 'Veg Masala',
        category: 'vegetable',
        rating: 4.3,
        price: 4,
        img: 'images/vegetable/vegetable-masala.jpg',
        quantity: 1
    },
    {
        id: 29,
        name: 'Veg Pakora',
        category: 'vegetable',
        rating: 4.3,
        price: 4,
        img: 'images/vegetable/vegetable-pakora.jpg',
        quantity: 1
    },
    {
        id: 30,
        name: 'Momos',
        category: 'chinese',
        rating: 4.3,
        price: 8,
        img: 'images/chinese/cabbage-momos-.jpg',
        quantity: 1
    },
    {
        id: 31,
        name: 'Chicken Manchurian',
        category: 'chinese',
        rating: 4.3,
        price: 7,
        img: 'images/chinese/ChickenManchurian.jpg',
        quantity: 1
    },
    {
        id: 32,
        name: 'Chili Chicken',
        category: 'chinese',
        rating: 4.3,
        price: 5,
        img: 'images/chinese/Chili-Chicken.jpg',
        quantity: 1
    },
    {
        id: 33,
        name: 'Chowmein',
        category: 'chinese',
        rating: 4.3,
        price: 16,
        img: 'images/chinese/chowmin.jpg',
        quantity: 1
    },
    {
        id: 34,
        name: 'Spring Roll',
        category: 'chinese',
        rating: 4.3,
        price: 14,
        img: 'images/chinese/spring-rolls.jpg',
        quantity: 1
    },
    {
        id: 35,
        name: 'Szechuan Chicken',
        category: 'chinese',
        rating: 4.3,
        price: 10,
        img: 'images/chinese/szechuan-chicken.jpg',
        quantity: 1
    },
    {
        id: 36,
        name: 'Fried Rice',
        category: 'chinese',
        rating: 4.3,
        price: 8,
        img: 'images/chinese/veg-fried-rice.jpg',
        quantity: 1
    },
    {
        id: 37,
        name: 'Butter Masala Dosa',
        category: 'southIndian',
        rating: 4.3,
        price: 18,
        img: 'images/southIndian/Butter-Masala-Dosa.png',
        quantity: 1
    },
    {
        id: 38,
        name: 'Idli',
        category: 'southIndian',
        rating: 4.3,
        price: 20,
        img: 'images/southIndian/idli-with-rice-flour.jpg',
        quantity: 1
    },
    {
        id: 39,
        name: 'Masala Dosa',
        category: 'southIndian',
        rating: 4.3,
        price: 12,
        img: 'images/southIndian/masala-dosa.jpg',
        quantity: 1
    },
    {
        id: 40,
        name: 'Mysore Bonda',
        category: 'southIndian',
        rating: 4.3,
        price: 10,
        img: 'images/southIndian/mysore-bonda.jpg',
        quantity: 1
    },
    {
        id: 41,
        name: 'Onion Uttapam',
        category: 'southIndian',
        rating: 4.3,
        price: 15,
        img: 'images/southIndian/onion-uttapam.jpg',
        quantity: 1
    },
    {
        id: 42,
        name: 'Plain Dosa',
        category: 'southIndian',
        rating: 4.3,
        price: 40,
        img: 'images/southIndian/plain-dosa.jpeg',
        quantity: 1
    },
    {
        id: 43,
        name: 'Rava Uttapam',
        category: 'southIndian',
        rating: 4.3,
        price: 25,
        img: 'images/southIndian/Rava-Uttapam.jpg',
        quantity: 1
    },
    {
        id: 44,
        name: 'Sambhar Vada',
        category: 'southIndian',
        rating: 4.3,
        price: 34,
        img: 'images/southIndian/sambhar-vada.jpg',
        quantity: 1
    },
]

function displayItems() {
    let biryani = document.getElementById("biryani");
    let chicken = document.getElementById("chicken");
    let paneer = document.getElementById("paneer");
    let vegetable = document.getElementById("vegetable");
    let chinese = document.getElementById("chinese");
    let southIndian = document.getElementById("southIndian");

    let biryaniData = foodItem.filter(item => item.category === "biryani")
    let chickenData = foodItem.filter(item => item.category === "chicken")
    let paneerData = foodItem.filter(item => item.category === "paneer")
    let vegetableData = foodItem.filter(item => item.category === "vegetable")
    let chineseData = foodItem.filter(item => item.category === "chinese")
    let southIndianData = foodItem.filter(item => item.category === "southIndian")

    biryaniData.map(item => {

        let itemCard = document.createElement("div")
        itemCard.setAttribute("id", "item-cart")
        itemCard.setAttribute("class", "col-lg-2 col-md-4 col-5 ms-4 mt-3")

        let cardTop = document.createElement("div");
        cardTop.setAttribute("id", "cart-top")

        let star = document.createElement("i");
        star.setAttribute("class", "fa fa-star")
        star.setAttribute("id", "rating")
        star.innerText = " " + item.rating

        let heart = document.createElement("i");
        heart.setAttribute("class", "fa-regular fa-heart add-to-cart")
        heart.setAttribute("id", item.id)

        cardTop.appendChild(star)
        cardTop.appendChild(heart)

        let img = document.createElement("img")
        img.setAttribute("src", item.img)

        let itemName = document.createElement("p");
        itemName.setAttribute("id", "item-name")
        itemName.innerHTML = item.name

        let itemPrice = document.createElement("p")
        itemPrice.setAttribute("id", "item-price")
        itemPrice.innerHTML = "Price : $ " + item.price


        itemCard.appendChild(cardTop)
        itemCard.appendChild(img)
        itemCard.appendChild(itemName)
        itemCard.appendChild(itemPrice)
        biryani.appendChild(itemCard)
    })

    chickenData.map(item => {
        let itemCard = document.createElement("div");
        itemCard.setAttribute("id", "item-cart");
        itemCard.setAttribute("class", "col-lg-2 col-md-4 col-5 ms-4 mt-3")

        let cartTop = document.createElement("div")
        cartTop.setAttribute("id", "cart-top")

        let star = document.createElement("i");
        star.setAttribute("class", "fa fa-star")
        star.setAttribute("id", "rating")
        star.innerHTML = " " + item.rating

        let heart = document.createElement("i")
        heart.setAttribute("class", "fa-regular fa-heart add-to-cart")
        heart.setAttribute("id", item.id)

        cartTop.appendChild(star)
        cartTop.appendChild(heart)

        let img = document.createElement("img")
        img.src = item.img;

        let itemName = document.createElement("p");
        itemName.setAttribute("id", "item-name")
        itemName.innerHTML = item.name

        let itemPrice = document.createElement("p");
        itemPrice.setAttribute("id", "item-name")
        itemPrice.innerHTML = "Price : $ " + item.price

        itemCard.appendChild(cartTop)
        itemCard.appendChild(img)
        itemCard.appendChild(itemName)
        itemCard.appendChild(itemPrice)
        chicken.appendChild(itemCard)

    })

    paneerData.map(item => {
        let itemCard = document.createElement("div");
        itemCard.setAttribute("id", "item-cart");
        itemCard.setAttribute("class", "col-lg-2 col-md-4 col-5 ms-4 mt-3")

        let cartTop = document.createElement("div")
        cartTop.setAttribute("id", "cart-top")

        let star = document.createElement("i");
        star.setAttribute("class", "fa fa-star")
        star.setAttribute("id", "rating")
        star.innerHTML = " " + item.rating

        let heart = document.createElement("i")
        heart.setAttribute("class", "fa-regular fa-heart add-to-cart")
        heart.setAttribute("id", item.id)

        cartTop.appendChild(star)
        cartTop.appendChild(heart)

        let img = document.createElement("img")
        img.src = item.img;

        let itemName = document.createElement("p");
        itemName.setAttribute("id", "item-name")
        itemName.innerHTML = item.name

        let itemPrice = document.createElement("p");
        itemPrice.setAttribute("id", "item-name")
        itemPrice.innerHTML = "Price : $ " + item.price

        itemCard.appendChild(cartTop)
        itemCard.appendChild(img)
        itemCard.appendChild(itemName)
        itemCard.appendChild(itemPrice)
        paneer.appendChild(itemCard)
    })

    vegetableData.map(item => {
        let itemCard = document.createElement("div");
        itemCard.setAttribute("id", "item-cart");
        itemCard.setAttribute("class", "col-lg-2 col-md-4 col-5 ms-4 mt-3")

        let cartTop = document.createElement("div")
        cartTop.setAttribute("id", "cart-top")

        let star = document.createElement("i");
        star.setAttribute("class", "fa fa-star")
        star.setAttribute("id", "rating")
        star.innerHTML = " " + item.rating

        let heart = document.createElement("i")
        heart.setAttribute("class", "fa-regular fa-heart add-to-cart")
        heart.setAttribute("id", item.id)

        cartTop.appendChild(star)
        cartTop.appendChild(heart)

        let img = document.createElement("img")
        img.src = item.img;

        let itemName = document.createElement("p");
        itemName.setAttribute("id", "item-name")
        itemName.innerHTML = item.name

        let itemPrice = document.createElement("p");
        itemPrice.setAttribute("id", "item-name")
        itemPrice.innerHTML = "Price : $ " + item.price

        itemCard.appendChild(cartTop)
        itemCard.appendChild(img)
        itemCard.appendChild(itemName)
        itemCard.appendChild(itemPrice)
        vegetable.appendChild(itemCard)

    })

    chineseData.map(item => {
        let itemCard = document.createElement("div");
        itemCard.setAttribute("id", "item-cart");
        itemCard.setAttribute("class", "col-lg-2 col-md-4 col-5 ms-4 mt-3")

        let cartTop = document.createElement("div")
        cartTop.setAttribute("id", "cart-top")

        let star = document.createElement("i");
        star.setAttribute("class", "fa fa-star")
        star.setAttribute("id", "rating")
        star.innerHTML = " " + item.rating

        let heart = document.createElement("i")
        heart.setAttribute("class", "fa-regular fa-heart add-to-cart")
        heart.setAttribute("id", item.id)

        cartTop.appendChild(star)
        cartTop.appendChild(heart)

        let img = document.createElement("img")
        img.src = item.img;

        let itemName = document.createElement("p");
        itemName.setAttribute("id", "item-name")
        itemName.innerHTML = item.name

        let itemPrice = document.createElement("p");
        itemPrice.setAttribute("id", "item-name")
        itemPrice.innerHTML = "Price : $ " + item.price

        itemCard.appendChild(cartTop)
        itemCard.appendChild(img)
        itemCard.appendChild(itemName)
        itemCard.appendChild(itemPrice)
        chinese.appendChild(itemCard)
    })

    southIndianData.map(item => {
        let itemCard = document.createElement("div");
        itemCard.setAttribute("id", "item-cart");
        itemCard.setAttribute("class", "col-lg-2 col-md-4 col-5 ms-4 mt-3")

        let cartTop = document.createElement("div")
        cartTop.setAttribute("id", "cart-top")

        let star = document.createElement("i");
        star.setAttribute("class", "fa fa-star")
        star.setAttribute("id", "rating")
        star.innerHTML = " " + item.rating

        let heart = document.createElement("i")
        heart.setAttribute("class", "fa-regular fa-heart add-to-cart")
        heart.setAttribute("id", item.id)

        cartTop.appendChild(star)
        cartTop.appendChild(heart)

        let img = document.createElement("img")
        img.src = item.img;

        let itemName = document.createElement("p");
        itemName.setAttribute("id", "item-name")
        itemName.innerHTML = item.name

        let itemPrice = document.createElement("p");
        itemPrice.setAttribute("id", "item-name")
        itemPrice.innerHTML = "Price : $ " + item.price

        itemCard.appendChild(cartTop)
        itemCard.appendChild(img)
        itemCard.appendChild(itemName)
        itemCard.appendChild(itemPrice)
        southIndian.appendChild(itemCard)
    })
}
displayItems()

function selectTaste() {
    let vegData = [...new Map(foodItem.map(item => [item.category, item])).values()];

    vegData.map(item => {

        let categoryList = document.getElementById("category-list");
        let listCard = document.createElement("div");
        listCard.setAttribute("class", "list-card");

        let listImg = document.createElement("img");
        listImg.src = item.img;

        let listName = document.createElement('a');
        let listNode = document.createTextNode(item.name)
        listName.appendChild(listNode)
        listName.href = `#${item.category}`;
        listName.className = "list-name";

        listCard.appendChild(listImg)
        listCard.appendChild(listName)
        categoryList.appendChild(listCard)
    })
}
selectTaste();



let heart = document.querySelectorAll(".add-to-cart");
heart.forEach(item => {
    item.addEventListener("click", addToCart)
})

cartData = [];
function addToCart() {
    let itemToAdd = this.parentNode.nextSibling.nextSibling.innerText;
    let itemObj = foodItem.find(item => item.name === itemToAdd)

    let index = cartData.indexOf(itemObj);

    if (index === -1) {
        document.getElementById(itemObj.id).classList.add("toggle-heart")
        let countItems = document.getElementById("countItems");
        cartData = [...cartData, itemObj]
        countItems.innerHTML = `( ${cartData.length} ) Item`;
    }
    else {
        alert("Added to cart!")
    }
}

function cartItems() {
    let tableBody = document.getElementById("table-body");
    tableBody.innerHTML = '';


    cartData.map(item => {

        let tableRow = document.createElement("tr");
        let rowData1 = document.createElement("td");
        let img = document.createElement("img");
        img.src = item.img
        rowData1.appendChild(img);

        let rowData2 = document.createElement("td")
        rowData2.innerHTML = item.name;

        let rowData3 = document.createElement("td");
        let btn1 = document.createElement("button");
        btn1.className = "decrease-item";
        btn1.innerText = "-"
        let span = document.createElement("span");
        span.className = "count"
        span.innerHTML = item.quantity;
        let btn2 = document.createElement("button");
        btn2.className = "increase-item";
        btn2.innerText = "+"

        rowData3.appendChild(btn1)
        rowData3.appendChild(span)
        rowData3.appendChild(btn2)

        let rowData4 = document.createElement("td");
        rowData4.textContent = item.price;

        tableRow.appendChild(rowData1)
        tableRow.appendChild(rowData2)
        tableRow.appendChild(rowData3)
        tableRow.appendChild(rowData4)

        tableBody.appendChild(tableRow)
    })

    document.querySelectorAll(".increase-item").forEach(item => {
        item.addEventListener("click", incrementItem)
    })

    document.querySelectorAll(".decrease-item").forEach(item => {
        item.addEventListener("click", decreaseItem)
    })
}
let currPrice = 0;

function incrementItem() {
    let itemToInc = this.parentNode.previousSibling.innerText;
    var incObj = cartData.find(element => element.name == itemToInc);
    incObj.quantity += 1;
    currPrice = (incObj.price * incObj.quantity - incObj.price * (incObj.quantity - 1)) / (incObj.quantity - 1);
    incObj.price = incObj.quantity * currPrice
    totalAmount()
    cartItems();
}

function decreaseItem() {
    let itemToInc = this.parentNode.previousSibling.innerText;
    let privObj = foodItem.find(item => item.name === itemToInc);

    let ind = cartData.indexOf(privObj);

    if(privObj.quantity > 1){
        privObj.quantity -= 1
        privObj.price = privObj.quantity * currPrice;
        totalAmount();
    }
    else{
        alert("Are You Sure Delete ?");
        cartData.splice(ind , 1)
        let countItems = document.getElementById("countItems");
        countItems.innerHTML = `( ${cartData.length} Items)`;
        document.getElementById(privObj.id).classList.remove("toggle-heart");
        if(cartData.length >= 1){
            cartItems()
        }
        else{
            document.getElementById("cart-page").style.display =  "none";
            document.getElementById("checkout").style.display =  "none";
            document.getElementById("food-items").style.display =  "block";
            document.getElementById("category-list").style.display =  "block";
            document.getElementById("countItems").innerHTML = ` ( ${cartData.length} ) Items`;
        }
    }

    cartItems()
}

function totalAmount() {
    let sum = 0;
    let count = 0;
    cartData.map(item => {
        sum += item.price;
        count += item.quantity
    })
    document.getElementById('total-item').innerText = 'Total Item : ' + count;
    document.getElementById('total-price').innerText = 'Total Price : $ ' + sum;
}


let cartPlus = document.getElementById("cart-plus");

cartPlus.addEventListener("click", function () {
    if (cartData.length > 0) {
            document.getElementById("cart-page").classList.toggle("block");
            document.getElementById("checkout").classList.toggle("block");
            document.getElementById("food-items").classList.toggle("none");
            document.getElementById("category-list").classList.toggle("none");
        cartItems();
    }
    else {
        alert("Currently no item in cart!");
    }
    totalAmount()
})